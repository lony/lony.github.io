
<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Goetz Epperlein">
<meta name="keywords" content="programming,ansible,setup">
<meta property="og:title" content="Setup Reloaded - Ansible to the rescue - [x]">
<meta property="og:description" content="Setup Reloaded - Ansible to the rescue">
<title>Setup Reloaded - Ansible to the rescue | [x]</title>

<link rel="stylesheet" href="https://lony.github.io//css/style.css">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css">


<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="https://lony.github.io/"><h1 class="title is-4">[x]</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          
          <a class="level-item" href="https://de.linkedin.com/in/goetzepperlein">
            <span class="icon">
              <i class="fa fa-linkedin"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://www.xing.com/profile/Goetz_Epperlein">
            <span class="icon">
              <i class="fa fa-xing"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://github.com/lony">
            <span class="icon">
              <i class="fa fa-github"></i>
            </span>
          </a>
          
          <a class="level-item" href="/post/2017/cli-commands/">
            <span class="icon">
              <i class="fa fa-terminal"></i>
            </span>
          </a>
          
          <a class="level-item" href="/index.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>
          </a>
          
        </nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <h2 class="subtitle is-6">October 7, 2017</h2>
    <h1 class="title">Setup Reloaded - Ansible to the rescue</h1>
    
      <div class="tags">
    
        <a class="button is-link" href="/tags/programming">programming</a>
    
        <a class="button is-link" href="/tags/ansible">ansible</a>
    
        <a class="button is-link" href="/tags/setup">setup</a>
    
</div>

    
    <div class="content">
      

<p>Last year I tried to &ldquo;semi-automate&rdquo; my OSX setup, as described in the <a href="/post/2016/mac-osx-setup/">Mac OS X Setup post</a>. This weekend I enhanced the deployment using Ansible.</p>

<p>If you are interested have a look into my <a href="https://github.com/lony/dotFiles">dotfile repository</a>. The setup for now only supports OSX, but is already a big step forward for me.</p>

<p><img src="/img/2017/setup-reloaded/image.png" alt="Sample cli setup" /></p>

<h1 id="usage">Usage</h1>

<ol>
<li>Clone repo <code>git clone git@github.com:lony/dotFiles.git</code></li>
<li>Customize <a href="ansible/roles/dotfiles/src/bash_zsh/all_secret.sh">all_secret.sh</a> and maybe <a href="ansible/roles/dotfiles/src/.ssh/config">.ssh/config</a> (see <a href="/post/2017/cli-commands/#secure-shell-command-ssh">SSH guide</a>)</li>
<li>Execute <code>./setup.sh</code></li>
</ol>

<h1 id="feature">Feature</h1>

<ul class="task-list">
<li><label><input type="checkbox" checked disabled class="task-list-item"> <a href="https://brew.sh/">Homebrew</a> setup</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> <a href="https://caskroom.github.io/">Homebrew Cask</a> setup</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a> setup</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> dotfiles setup, optimisation</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> vim setup incl. <a href="https://github.com/junegunn/vim-plug">vim-plug</a></label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> tmux setup incl. <a href="https://github.com/tmux-plugins/tpm">tpm</a></label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> Python simple setup</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> Homebrew cleanup</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> Setup script to prepare Ansible</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> Ansible installation for OSX</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> Ansible installation for Linux</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> Ansible installation for Windows [really?]</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> OSX cli configuration see <a href="https://lony.github.io/post/2016/mac-osx-setup/#user-interface">this</a></label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> OSX system configuration</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> OSX dock configuration</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> OSX Apple store installation</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> iTerm2 configuration</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> Testing</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> gitconfig</label></li>
</ul>

<h1 id="architecture">Architecture</h1>

<ol>
<li>The <a href="setup.sh">setup.sh</a> installs OS specific Ansible prequesites and starts Ansible</li>
<li>Ansible has multiple <a href="ansible/site.yml">roles</a> which each are triggered</li>
<li>The dotfile role contains a <a href="ansible/roles/dotfiles/bin/bootstrap.py">Python script</a> which creates shell scripts for bash, zsh and fish</li>
</ol>

<h1 id="structure">Structure</h1>

<pre><code>❯ tree  -L 5 (custom)
.
├── README.md                     - This readme
├── ansible
│   ├── README.md                 - Ansible links
│   ├── roles
│   │   ├── dotfiles              - First role for dotfiles
│   │   │   ├── bin
│   │   │   │   └── bootstrap.py  - Custom Python script
│   │   │   ├── src               - Dotfiles
│   │   │   └── tasks
│   │   │       └── main.yml      - Task executed by Ansible
│   │   ├── homebrew
│   │   │   ├── tasks
│   │   │   └── vars
│   │   │       └── main.yml      - Variables used by Ansible
│   │   ├── homebrew_cleanup
│   │   ├── python
│   │   ├── tmux
│   │   ├── vim
│   │   └── zsh_oh-my-zsh
│   └── site.yml                  - Ansible playbook definition
└── setup.sh                      - Script to prepare OS for Ansible
</code></pre>

<h1 id="thanks">Thanks</h1>

<p>This is heavily inspired by the work of the following people:</p>

<ul>
<li><a href="https://github.com/dhabersack/dotfiles">Dominik&rsquo;s</a> - basic idea for bash, zsh, vim and tmux</li>
<li>Christopher - vim plugins</li>
<li><a href="https://github.com/ludwigm">Michael</a> - cli tooling e.g. httpie, jq</li>
<li><a href="https://github.com/hypebeast/dotfiles">Sebastian&rsquo;s</a> - homebrew setup, tmux enhancing</li>
<li><a href="https://github.com/floschnell">Florian</a> - fish support</li>
<li><a href="https://github.com/geerlingguy/mac-dev-playbook">Jeff&rsquo;s</a> - Ansible deployment</li>
<li><a href="https://github.com/mtchavez/mac-ansible">Chavez&rsquo;s</a> - Ansible bootstrapping and vim, tmux enhanced setup</li>
</ul>

    </div>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; <a href="https://github.com/lony">Goetz Epperlein</a> 2016 - 2018</p>
  </div>
</section>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/go.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/dockerfile.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-83817537-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



