<!DOCTYPE html>
<html lang="en-GB" dir="ltr">
  <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
      
        <title>Setup Reloaded - Ansible to the rescue - [x]</title>
        <meta name="description" content="Test">
        <meta name="keywords" content="programming,ansible,setup">
        <meta name="author" content="Goetz Epperlein">

        
      
        <meta name="geo.region" content="DE-BY" />
        <meta name="geo.placename" content="M&uuml;nchen" />
        <meta name="geo.position" content="48.135125;11.58198" />
        <meta name="ICBM" content="48.135125, 11.58198" />
            
        <meta property="og:title" content="Setup Reloaded - Ansible to the rescue - [x]">
        <meta property="og:description" content="Setup Reloaded - Ansible to the rescue">
        <meta property="og:url" content="lony.github.io" />
        <meta property="og:locale" content="en_GB" />
        <meta property="og:type" content="website" />
        <meta property="og:site_name" content="lony.github.io" />

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css"
            integrity="sha256-zIG416V1ynj3Wgju/scU80KAEWOsO5rRLfVyRDuOv7Q="
            crossorigin="anonymous" />
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css"
            integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ"
            crossorigin="anonymous">
        <style type="text/css">
            a {
                color: #F86B61;
            }
            .article-margin {
                padding-bottom: 50px;
            }
            .pagination-link.is-current {
                background-color: #F86B61;
                border-color: #F86B61;
            }
            #box--hire {
                z-index: 10;
                position: absolute;
                top: 1em;
                right: 1em;
            }
        </style>

        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"
            integrity="sha256-Zd1icfZ72UBmsId/mUcagrmN7IN5Qkrvh75ICHIQVTk="
            crossorigin="anonymous" />
        
            
        

        <script defer src="https://use.fontawesome.com/releases/v5.1.1/js/all.js"
            integrity="sha384-BtvRZcyfv4r0x/phJt9Y9HhnN5ur1Z+kZbKVgzVBAlQZX4jvAuImlIz+bG7TS00a"
            crossorigin="anonymous"
            async></script>

        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"
            integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw="
            crossorigin="anonymous"
            async></script>
        <script>hljs.initHighlightingOnLoad();</script>
        

        
          
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-83817537-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

        
  </head>
  <body>

        <div id="box--hire">
            <a href="https://getgoetz.com/">
                <span class="icon is-small">
                <i class="fa fa-envelope"></i>
                </span>
                Hire!
            </a>
        </div>
      

    <section class="section">
        <div class="container">
            <h1 class="title">
                Setup Reloaded - Ansible to the rescue
                &nbsp;
                <a href="lony.github.io">
                    <span class="icon">
                        <i class="fas fa-undo"></i>
                    </span>
                </a>
            </h1>


            
            <h2 class="subtitle is-6">2017-10-07 Saturday 13:00 UTC</h2>
            
                <div class="tags">
                    
                        <a class="tag is-light" href="/lony.github.io/tags/programming">
                            programming
                        </a>
                    
                        <a class="tag is-light" href="/lony.github.io/tags/ansible">
                            ansible
                        </a>
                    
                        <a class="tag is-light" href="/lony.github.io/tags/setup">
                            setup
                        </a>
                    
                </div>
            
            <div class="content">
                

<p>Last year I tried to &ldquo;semi-automate&rdquo; my OSX setup, as described in the <a href="/post/2016/mac-osx-setup/">Mac OS X Setup post</a>. This weekend I enhanced the deployment using Ansible.</p>

<p>If you are interested have a look into my <a href="https://github.com/lony/dotFiles">dotfile repository</a>. The setup for now only supports OSX, but is already a big step forward for me.</p>

<p><img src="/img/2017/setup-reloaded/image.png" alt="Sample cli setup" /></p>

<h1 id="usage">Usage</h1>

<ol>
<li>Clone repo <code>git clone git@github.com:lony/dotFiles.git</code></li>
<li>Customize <a href="ansible/roles/dotfiles/src/bash_zsh/all_secret.sh">all_secret.sh</a> and maybe <a href="ansible/roles/dotfiles/src/.ssh/config">.ssh/config</a> (see <a href="/post/2017/cli-commands/#secure-shell-command-ssh">SSH guide</a>)</li>
<li>Execute <code>./setup.sh</code></li>
</ol>

<h1 id="feature">Feature</h1>

<ul class="task-list">
<li><label><input type="checkbox" checked disabled class="task-list-item"> <a href="https://brew.sh/">Homebrew</a> setup</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> <a href="https://caskroom.github.io/">Homebrew Cask</a> setup</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a> setup</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> dotfiles setup, optimisation</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> vim setup incl. <a href="https://github.com/junegunn/vim-plug">vim-plug</a></label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> tmux setup incl. <a href="https://github.com/tmux-plugins/tpm">tpm</a></label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> Python simple setup</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> Homebrew cleanup</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> Setup script to prepare Ansible</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> Ansible installation for OSX</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> Ansible installation for Linux</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> Ansible installation for Windows [really?]</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> OSX cli configuration see <a href="https://lony.github.io/post/2016/mac-osx-setup/#user-interface">this</a></label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> OSX system configuration</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> OSX dock configuration</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> OSX Apple store installation</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> iTerm2 configuration</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> Testing</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> gitconfig</label></li>
</ul>

<h1 id="architecture">Architecture</h1>

<ol>
<li>The <a href="setup.sh">setup.sh</a> installs OS specific Ansible prequesites and starts Ansible</li>
<li>Ansible has multiple <a href="ansible/site.yml">roles</a> which each are triggered</li>
<li>The dotfile role contains a <a href="ansible/roles/dotfiles/bin/bootstrap.py">Python script</a> which creates shell scripts for bash, zsh and fish</li>
</ol>

<h1 id="structure">Structure</h1>

<pre><code>❯ tree  -L 5 (custom)
.
├── README.md                     - This readme
├── ansible
│   ├── README.md                 - Ansible links
│   ├── roles
│   │   ├── dotfiles              - First role for dotfiles
│   │   │   ├── bin
│   │   │   │   └── bootstrap.py  - Custom Python script
│   │   │   ├── src               - Dotfiles
│   │   │   └── tasks
│   │   │       └── main.yml      - Task executed by Ansible
│   │   ├── homebrew
│   │   │   ├── tasks
│   │   │   └── vars
│   │   │       └── main.yml      - Variables used by Ansible
│   │   ├── homebrew_cleanup
│   │   ├── python
│   │   ├── tmux
│   │   ├── vim
│   │   └── zsh_oh-my-zsh
│   └── site.yml                  - Ansible playbook definition
└── setup.sh                      - Script to prepare OS for Ansible
</code></pre>

<h1 id="thanks">Thanks</h1>

<p>This is heavily inspired by the work of the following people:</p>

<ul>
<li><a href="https://github.com/dhabersack/dotfiles">Dominik&rsquo;s</a> - basic idea for bash, zsh, vim and tmux</li>
<li>Christopher - vim plugins</li>
<li><a href="https://github.com/ludwigm">Michael</a> - cli tooling e.g. httpie, jq</li>
<li><a href="https://github.com/hypebeast/dotfiles">Sebastian&rsquo;s</a> - homebrew setup, tmux enhancing</li>
<li><a href="https://github.com/floschnell">Florian</a> - fish support</li>
<li><a href="https://github.com/geerlingguy/mac-dev-playbook">Jeff&rsquo;s</a> - Ansible deployment</li>
<li><a href="https://github.com/mtchavez/mac-ansible">Chavez&rsquo;s</a> - Ansible bootstrapping and vim, tmux enhanced setup</li>
</ul>

            </div>
            <div class="is-pulled-right" >
                <a href="lony.github.io">
                    <span class="icon">
                        <i class="fas fa-undo"></i>
                    </span>
                </a>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container has-text-centered">
            <p><a href="/post/2017/cli-commands/">&copy;</a> <a href="https://getgoetz.com">Goetz Epperlein</a> 2016 - 2018</p>
        </div>
    </section>

</body>
</html>